<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS da página -->
    <link rel="stylesheet" href="./assets/css/metas.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <!-- JS geral do projeto -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Font Awesome JS -->
    <script src="https://kit.fontawesome.com/b9abb5ca18.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Booststrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <title>Mydas - Acompanhamento de Metas</title>
</head>

<body>
    <header>
        <input type="checkbox" id="menu-toggle">
        <label for="menu-toggle" class="menu-btn">
            <i class="fa-solid fa-bars fa-lg"></i>
        </label>
        <label for="menu-toggle" class="overlay"></label> <!-- Overlay para fechar o menu -->
        <div class="dashboard">
            <aside class="barra-lateral">
                <div class="user-profile">
                    <img src="https://picsum.photos/id/50/50" class="avatar">
                    <div>
                        <p id="welcome">Bem-vindo,</p>
                        <p id="user">Usuário</p>
                    </div>
                </div>
                <nav>
                    <ul class="nav-menu-style">
                        <li class="nav-item-style">
                            <a href="index.html" class="nav-link-style" id="active-item">
                                <i class="fas fa-regular fa-house"></i>
                                <span>HomePage</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="biblioteca.html" class="nav-link-style">
                                <i class="fas fa-regular fa-video"></i>
                                <span>Biblioteca</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="gastos.html" class="nav-link-style">
                                <i class="fas fa-user"></i>
                                <span>Gastos</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="metas.html" class="nav-link-style">
                                <i class="fas fa-book"></i>
                                <span>Metas</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="calculadoraJuros.html" class="nav-link-style">
                                <i class="fas fa-regular fa-calculator"></i>
                                <span>Calculadora de Juros</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="calculadoraMetas.html" class="nav-link-style">
                                <i class="fas fa-regular fa-calculator"></i>
                                <span>Calculadora de Metas</span>
                            </a>
                        </li>
                        <li class="nav-item-style">
                            <a href="sobrenos.html" class="nav-link-style">
                                <i class="fas fa-regular fa-calendar"></i>
                                <span>Sobre nós</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="separator"></div>

                <a href="/config.html" class="nav-link-style">
                    <i class="fas fa-regular fa-gear"></i>
                    <span>Configurações</span>
                </a>
            </aside>
    </header>
       <div id="metaFormModal"
        class="hidden fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center">
        <form id="metaForm" class="bg-white p-6 rounded-2xl shadow-lg w-96 flex flex-col gap-4">

            <h2 id="formTitle" class="text-xl font-bold text-center">Nova Meta</h2>

            <label>Título:</label>
            <input name="titulo" id="metaTitulo" class="border p-2 rounded" type="text">

            <label>Descrição:</label>
            <textarea name="descricao" id="metaDescricao" class="border p-2 rounded"></textarea>

            <label>Valor da Meta:</label>
            <input name="valorMeta" id="metaValorMeta" class="border p-2 rounded" type="number">

            <label>Adicionar Valor:</label>
            <input name="valorAtual" id="metaValorAtual" class="border p-2 rounded" type="number">

            <label>Categoria:</label>
            <input name="categoria" id="metaCategoria" class="border p-2 rounded" type="text">

            <div class="flex justify-between mt-4">
                <button type="button" id="cancelarForm"
                    class="bg-gray-400 text-white py-2 px-4 rounded">Cancelar</button>
                <button type="submit" id="salvarMeta" class="bg-blue-600 text-white py-2 px-4 rounded">Salvar</button>
            </div>

        </form>
    </div>

    <main class="main">
        <div class="box">
            <div class="hero">
                <div class="title-box">
                    <h1 class="title">Suas Metas</h1>
                </div>
                <div class="subtitle">
                    <p>Defina e acompanhe suas metas</p>
                </div>
            </div>
            <div class="title-box" style="margin-top: 20px;">
                <h2 class="title">Evolução Financeira</h2>
            </div>

            <div style="
    background: white;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    width: 80%;
    max-width: 600px;
">
                <p><strong>Nível:</strong> <span id="levelValor">1</span></p>
                <p><strong>XP:</strong> <span id="xpValor">0</span></p>

                <h3><strong>Conquistas:</strong></h3>
                <ul id="listaConquistas" style="padding-left: 20px"></ul>
            </div>



            <div class="listMetas" id="listMetas">
                <div class="meta">
                    <div class="graph">
                        <div class="title-box">
                            <h2 class="title">Meta 1: título da meta</h2>
                        </div>
                        <canvas id="myGraph"></canvas>
                    </div>
                    <div class="progress">
                        <div class="progress-title">
                            <div class="title-box">
                                <h2 class="title">Seu Progresso</h2>
                            </div>
                        </div>
                        <div class="progress-bar-wrapper">
                            <div class="progress-container">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p id="progressText">60%</p>
                        </div>
                        <div class="extend">
                            <button class="extendButton">
                                <h2>Alterar meta</h2>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="newGoal">
                <button id="btnNovaMeta" class="addMetaButton">
                    + Nova Meta
                </button>
            </div>
        </div>

    </main>

    <!-- Modal: Adicionar Valor -->
    <div id="modalAdicionar" class="modalAdicionar hidden">
        <form id="formAdicionar">
            <h2>Adicionando Valor</h2>

            <label>Valor a adicionar:</label>
            <input type="number" name="valor" required>

            <input type="hidden" name="metaId">

            <button type="submit">Salvar</button>
            <button type="button" onclick="fecharModal()">Cancelar</button>
        </form>
    </div>

    <!-- Modal: Editar Meta -->
    <div id="modalEditar" class="modalEditar hidden">
        <form id="formEditar">
            <h2>Editar Meta</h2>

            <label>Título:</label>
            <input type="text" name="titulo" required>

            <label>Descrição:</label>
            <textarea name="descricao" rows="3" required></textarea>

            <label>Valor total (meta):</label>
            <input type="number" name="valorMeta" min="1" required>

            <label>Categoria:</label>
            <input type="text" name="categoria" required>

            <label>Tipo:</label>
            <select name="tipo">
                <option value="normal">Normal</option>
                <option value="recorrente">Recorrente</option>
                <option value="investimento">Investimento</option>
            </select>

            <input type="hidden" name="metaId">

            <button type="submit" class="btnSalvar">Salvar alterações</button>
            <button type="button" class="btnCancelar" onclick="fecharModal()">Cancelar</button>

            <button type="button" class="btnExcluir" onclick="excluirMeta()">Excluir meta</button>
        </form>
    </div>


    <footer>
        <div class="footer-container">
            <h2>Mydas</h2>
            <p>Cada escolha financeira vale ouro.</p>
            <div class="footer-info">
                <p><i class="fa-solid fa-envelope"></i> mydas@gmail.com.br</p>
                <p><i class="fa-solid fa-phone"></i> 9999-9999</p>
                <p><i class="fa-solid fa-location-dot"></i> Minas Gerais, MG - Brasil</p>
            </div>
        </div>
    </footer>

     <script src="./assets/scripts/metas.js"></script>
</body>

</html>